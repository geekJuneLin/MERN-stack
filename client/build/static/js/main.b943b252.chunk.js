(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{104:function(e,t,a){},105:function(e,t,a){"use strict";a.r(t);var n=a(0),c=a.n(n),r=a(17),l=a.n(r),o=a(19),u=a.n(o),s=a(6),i=a(8),m=a(67),d=a(113),E=a(109),p=a(68),h=a(115),b=a(60),g=a(112),O=a(65),f=a(107),S=a(111),R=a(66),y=a(108),j=function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return{type:"GET_ERROR",payload:{msg:e,status:t,id:a}}},v=function(){var e=Object(s.b)(),t=Object(s.c)((function(e){return e.errorReducer})),a=Object(s.c)((function(e){return e.authReducer.isAuthenticated})),n=c.a.useState(!1),r=Object(i.a)(n,2),l=r[0],o=r[1],m=c.a.useState(""),d=Object(i.a)(m,2),E=d[0],p=d[1],h=c.a.useState(""),v=Object(i.a)(h,2),I=v[0],L=v[1],C=c.a.useState(""),_=Object(i.a)(C,2),k=_[0],A=_[1],N=c.a.useState(null),T=Object(i.a)(N,2),w=T[0],G=T[1],D=function(){!function(e){e({type:"CLEAR_ERROR"})}(e),o(!l)},P=function(e){switch(e.target.type){case"text":p(e.target.value);break;case"email":L(e.target.value);break;case"password":A(e.target.value)}};return c.a.useEffect((function(){"REGISTER_FAILED"===t.id?G(t.msg):G(null),l&&a&&D()}),[t,a]),c.a.createElement(c.a.Fragment,null,c.a.createElement(b.a,{onClick:function(){o(!0)}},"Register"),c.a.createElement(g.a,{show:l,size:"md",onHide:D},c.a.createElement(g.a.Header,{closeButton:!0,className:"font-weight-bold display-4"},"Register"),c.a.createElement(O.a,null,w&&c.a.createElement(f.a,{variant:"danger"},w.error),c.a.createElement(S.a,null,c.a.createElement(S.a.Group,null,c.a.createElement(S.a.Label,null,"Name"),c.a.createElement(S.a.Control,{type:"text",placeholder:"Name",className:"mb-4",onChange:P}),c.a.createElement(S.a.Label,null,"Email"),c.a.createElement(S.a.Control,{type:"email",placeholder:"Email",className:"mb-4",onChange:P}),c.a.createElement(S.a.Label,null,"Password"),c.a.createElement(S.a.Control,{type:"password",placeholder:"Password",className:"mb-4",onChange:P})))),c.a.createElement(R.a,null,c.a.createElement(y.a,{variant:"dark",block:!0,onClick:function(){!function(e,t){u.a.post("/api/users",JSON.stringify(e),{headers:{"Content-Type":"application/json"}}).then((function(e){t({type:"REGISTER_SUCCESS",payload:e.data})})).catch((function(e){t(j(e.response.data,e.response.status,"REGISTER_FAILED")),t({type:"REGISTER_FAILED"})}))}({name:E,email:I,password:k},e)}},"Register"))))},I=function(){var e=Object(s.b)();return c.a.createElement(c.a.Fragment,null,c.a.createElement(b.a,{onClick:function(){e({type:"LOGOUT_SUCCES"})}},"Logout"))},L=function(){var e=Object(s.b)(),t=Object(s.c)((function(e){return e.authReducer.isAuthenticated})),a=(Object(s.c)((function(e){return e.errorReducer})),c.a.useState(!1)),n=Object(i.a)(a,2),r=n[0],l=n[1],o=c.a.useState(""),m=Object(i.a)(o,2),d=m[0],E=m[1],p=c.a.useState(""),h=Object(i.a)(p,2),v=h[0],I=h[1],L=c.a.useState(null),C=Object(i.a)(L,2),_=C[0],k=(C[1],function(){l(!r),_&&e({type:"CLEAR_ERROR"})}),A=function(e){switch(e.target.type){case"email":E(e.target.value);break;case"password":I(e.target.value)}};return c.a.createElement(c.a.Fragment,null,c.a.createElement(b.a,{onClick:k},"Login"),c.a.createElement(g.a,{show:r,size:"md",onHide:k},c.a.createElement(g.a.Header,{closeButton:!0,className:"font-weight-bold display-4"},"Login"),c.a.createElement(O.a,null,_&&c.a.createElement(f.a,{variant:"danger"},_.error),c.a.createElement(S.a,null,c.a.createElement(S.a.Group,null,c.a.createElement(S.a.Label,null,"Email"),c.a.createElement(S.a.Control,{type:"email",placeholder:"Email",className:"mb-4",onChange:A}),c.a.createElement(S.a.Label,null,"Password"),c.a.createElement(S.a.Control,{type:"password",placeholder:"Password",className:"mb-4",onChange:A})))),c.a.createElement(R.a,null,c.a.createElement(y.a,{variant:"dark",block:!0,onClick:function(){!function(e,t){u.a.post("/api/auth",JSON.stringify(t),{headers:{"Content-Type":"application/json"}}).then((function(t){e({type:"LOGIN_SUCCESS",payload:t.data})})).catch((function(t){e(j(t.response.data,t.response.status,"LOGIN_FAILED")),e({type:"LOGIN_FAILED"})}))}(e,{email:d,password:v}),t&&k()}},"Login"))))},C=function(){var e=Object(s.c)((function(e){return e.authReducer.isAuthenticated})),t=Object(s.c)((function(e){return e.authReducer.user}));c.a.useEffect((function(){g(!!e)}),[e]);var a=c.a.useState(!1),n=Object(i.a)(a,2),r=n[0],l=n[1],o=c.a.useState(!1),u=Object(i.a)(o,2),b=u[0],g=u[1],O=c.a.createElement(c.a.Fragment,null,c.a.createElement(m.a,null,c.a.createElement("span",{className:"navbar-text mr-3"},c.a.createElement("strong",null,t&&"Welcome, ".concat(t.name)))),c.a.createElement(m.a,null,c.a.createElement(I,null))),f=c.a.createElement(c.a.Fragment,null,c.a.createElement(m.a,null,c.a.createElement(v,null)),c.a.createElement(m.a,null,c.a.createElement(L,null)));return c.a.createElement(c.a.Fragment,null,c.a.createElement(d.a,{bg:"dark",variant:"dark",expand:"sm",className:"mb-5"},c.a.createElement(E.a,null,c.a.createElement(p.a,{href:"/"},"Shopping List"),c.a.createElement(d.a.Toggle,{"aria-controls":"basic-navbar-nav",onClick:function(){l(!r)}}),c.a.createElement(d.a.Collapse,{id:"basic-navbar-nav"},c.a.createElement(h.a,{className:"ml-auto"},b?O:f)))))},_=function(){var e=Object(s.b)(),t=Object(s.c)((function(e){return e.authReducer.isAuthenticated})),a=c.a.useState(!1),n=Object(i.a)(a,2),r=n[0],l=n[1],o=c.a.useState(""),m=Object(i.a)(o,2),d=m[0],p=m[1],h=function(){return l(!1)};return c.a.createElement(E.a,{className:"my-4"},t?c.a.createElement(y.a,{onClick:function(){l(!0)},variant:"dark"},"Add item"):c.a.createElement("h4",null,"Please Login to manage items"),c.a.createElement(g.a,{show:r,onHide:h,size:"lg"},c.a.createElement(g.a.Header,{closeButton:!0},"Add To Shopping List"),c.a.createElement(O.a,null,c.a.createElement(S.a,null,c.a.createElement(S.a.Group,null,c.a.createElement(S.a.Label,null,"Add Item"),c.a.createElement(S.a.Control,{as:"textarea",rows:"3",placeholder:"Add Shopping Item",onChange:function(e){p(e.target.value)}})))),c.a.createElement(R.a,null,c.a.createElement(y.a,{variant:"dark",block:!0,onClick:function(t){t.preventDefault();var a=localStorage.getItem("token"),n={headers:{"Content-Type":"application/json"}};a&&(n.headers["x-auth-token"]=a),u.a.post("/api/items",{name:d},n).then((function(t){e({type:"ADD_SHOPPING_ITEM",payload:t.data})})).catch((function(e){return console.log("POST error: ".concat(e))})),h()}},"Add Item"))))},k=a(116),A=a(114),N=a(110),T=function(){var e=Object(s.c)((function(e){return e.rootReducer.items})),t=Object(s.c)((function(e){return e.authReducer.isAuthenticated})),a=Object(s.b)();return c.a.createElement(E.a,null,c.a.createElement(k.a,{style:{marginBottom:"1rem"}},c.a.createElement(A.a,{className:"todo-list"},e&&e.map((function(e){var n=e._id,r=e.name;return c.a.createElement(N.a,{key:n,timeout:500,classNames:"fade"},c.a.createElement(k.a.Item,null,t&&c.a.createElement(y.a,{className:"remove-btn",variant:"danger",size:"sm",onClick:function(){return function(e){var t=localStorage.getItem("token"),n={headers:{"Content-Type":"application/json"}};t&&(n.headers["x-auth-token"]=t),u.a.delete("/api/items/".concat(e),n).then((function(t){console.log("Successfully deleted the item with id: ".concat(e)),a({type:"DELETE_SHOPPING_ITEM",payload:e}),console.log("Executed the dispatch func")})).catch((function(t){return console.log("DELETE error: ".concat(t,", id:").concat(e))}))}(n)}},"\xd7"),r))})))))};a(103),a(104);var w=function(){var e=Object(s.b)(),t=Object(s.c)((function(e){return e.authReducer.token}));return c.a.useEffect((function(){!function(e,t){e({type:"USER_LOADING"});var a={headers:{"Content-type":"application/json"}};t&&(a.headers["x-auth-token"]=t),u.a.get("/api/auth/user",a).then((function(t){return e({type:"USER_LOADED",payload:t.data})})).catch((function(t){e(j(t.response.data,t.response.status)),e({type:"AUTH_ERROR"})}))}(e,t),e({type:"ITEMS_LOADING"}),u.a.get("/api/items").then((function(t){return e({type:"GET_SHOPPING_ITEMS",payload:t.data})}))}),[]),c.a.createElement("div",{className:"App"},c.a.createElement(C,null),c.a.createElement(_,null),c.a.createElement(T,null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var G=a(24),D=a(71),P=a(72),H=a(7),U={items:[],loading:!1},F=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:U,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"GET_SHOPPING_ITEMS":return Object(H.a)(Object(H.a)({},e),{},{items:t.payload,loading:!1});case"ADD_SHOPPING_ITEM":return Object(H.a)(Object(H.a)({},e),{},{items:[].concat(Object(P.a)(e.items),[t.payload])});case"DELETE_SHOPPING_ITEM":return Object(H.a)(Object(H.a)({},e),{},{items:e.items.filter((function(e){return e._id!==t.payload}))});case"ITEMS_LOADING":return Object(H.a)(Object(H.a)({},e),{},{loading:!0});default:return e}},x={token:localStorage.getItem("token"),isAuthenticated:null,isLoading:!1,user:null},M=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:x,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"USER_LOADING":return Object(H.a)(Object(H.a)({},e),{},{isLoading:!0});case"USER_LOADED":return Object(H.a)(Object(H.a)({},e),{},{isAuthenticated:!0,isLoading:!1,user:t.payload});case"LOGIN_SUCCESS":case"REGISTER_SUCCESS":return localStorage.setItem("token",t.payload.token),Object(H.a)(Object(H.a)(Object(H.a)({},e),t.payload),{},{isAuthenticated:!0,isLoading:!1});case"AUTH_ERROR":case"LOGIN_FAILED":case"LOGOUT_SUCCES":case"REGISTER_FAILED":return localStorage.removeItem("token"),Object(H.a)(Object(H.a)({},e),{},{token:null,isLoading:!1,isAuthenticated:!1,user:null});default:return e}},B={msg:{},status:null,id:null},z=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:B,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"GET_ERROR":return{msg:t.payload.msg,status:t.payload.status,id:t.payload.id};case"CLEAR_ERROR":return{msg:{},status:null,id:null};default:return e}},J=Object(G.createStore)(Object(G.combineReducers)({rootReducer:F,authReducer:M,errorReducer:z}),Object(D.composeWithDevTools)());l.a.render(c.a.createElement(s.a,{store:J},c.a.createElement(w,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},75:function(e,t,a){e.exports=a(105)}},[[75,1,2]]]);
//# sourceMappingURL=main.b943b252.chunk.js.map