(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{104:function(e,a,t){},105:function(e,a,t){"use strict";t.r(a);var n=t(0),c=t.n(n),l=t(17),r=t.n(l),o=t(19),s=t.n(o),u=t(6),i=t(8),m=t(113),E=t(109),d=t(67),p=t(115),b=t(70),O=t(60),g=t(112),h=t(65),f=t(107),S=t(111),y=t(66),R=t(108),v=function(e,a){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return{type:"GET_ERROR",payload:{msg:e,status:a,id:t}}},j=function(){var e=Object(u.b)(),a=Object(u.c)((function(e){return e.errorReducer})),t=Object(u.c)((function(e){return e.authReducer.isAuthenticated})),n=c.a.useState(!1),l=Object(i.a)(n,2),r=l[0],o=l[1],m=c.a.useState(""),E=Object(i.a)(m,2),d=E[0],p=E[1],b=c.a.useState(""),j=Object(i.a)(b,2),I=j[0],L=j[1],_=c.a.useState(""),C=Object(i.a)(_,2),k=C[0],N=C[1],A=c.a.useState(null),G=Object(i.a)(A,2),T=G[0],w=G[1],D=function(){!function(e){e({type:"CLEAR_ERROR"})}(e),o(!r)},P=function(e){switch(e.target.type){case"text":p(e.target.value);break;case"email":L(e.target.value);break;case"password":N(e.target.value)}};return c.a.useEffect((function(){"REGISTER_FAILED"===a.id?w(a.msg):w(null),r&&t&&D()}),[a,t]),c.a.createElement(c.a.Fragment,null,c.a.createElement(O.a,{onClick:function(){o(!0)}},"Register"),c.a.createElement(g.a,{show:r,size:"md",onHide:D},c.a.createElement(g.a.Header,{closeButton:!0,className:"font-weight-bold display-4"},"Register"),c.a.createElement(h.a,null,T&&c.a.createElement(f.a,{variant:"danger"},T.error),c.a.createElement(S.a,null,c.a.createElement(S.a.Group,null,c.a.createElement(S.a.Label,null,"Name"),c.a.createElement(S.a.Control,{type:"text",placeholder:"Name",className:"mb-4",onChange:P}),c.a.createElement(S.a.Label,null,"Email"),c.a.createElement(S.a.Control,{type:"email",placeholder:"Email",className:"mb-4",onChange:P}),c.a.createElement(S.a.Label,null,"Password"),c.a.createElement(S.a.Control,{type:"password",placeholder:"Password",className:"mb-4",onChange:P})))),c.a.createElement(y.a,null,c.a.createElement(R.a,{variant:"dark",block:!0,onClick:function(){!function(e,a){s.a.post("/api/users",JSON.stringify(e),{headers:{"Content-Type":"application/json"}}).then((function(e){a({type:"REGISTER_SUCCESS",payload:e.data})})).catch((function(e){a(v(e.response.data,e.response.status,"REGISTER_FAILED")),a({type:"REGISTER_FAILED"})}))}({name:d,email:I,password:k},e)}},"Register"))))},I=function(){var e=Object(u.b)();return c.a.createElement(c.a.Fragment,null,c.a.createElement(O.a,{onClick:function(){e({type:"LOGOUT_SUCCES"})}},"Logout"))},L=function(){var e=Object(u.b)(),a=Object(u.c)((function(e){return e.authReducer.isAuthenticated})),t=Object(u.c)((function(e){return e.errorReducer})),n=c.a.useState(!1),l=Object(i.a)(n,2),r=l[0],o=l[1],m=c.a.useState(""),E=Object(i.a)(m,2),d=E[0],p=E[1],b=c.a.useState(""),j=Object(i.a)(b,2),I=j[0],L=j[1],_=c.a.useState(null),C=Object(i.a)(_,2),k=C[0],N=C[1],A=c.a.useState(!1),G=Object(i.a)(A,2),T=(G[0],G[1]),w=function(){o(!r),k&&e({type:"CLEAR_ERROR"})},D=function(e){switch(e.target.type){case"email":p(e.target.value);break;case"password":L(e.target.value)}};return c.a.useEffect((function(){a?(T(!0),w()):T(null),"LOGIN_FAILED"===t.id?N(t.msg):N(null)}),[a,t.id]),c.a.createElement(c.a.Fragment,null,c.a.createElement(O.a,{onClick:w},"Login"),c.a.createElement(g.a,{show:r,size:"md",onHide:w},c.a.createElement(g.a.Header,{closeButton:!0,className:"font-weight-bold display-4"},"Login"),c.a.createElement(h.a,null,k&&c.a.createElement(f.a,{variant:"danger"},k.error),c.a.createElement(S.a,null,c.a.createElement(S.a.Group,null,c.a.createElement(S.a.Label,null,"Email"),c.a.createElement(S.a.Control,{type:"email",placeholder:"Email",className:"mb-4",onChange:D}),c.a.createElement(S.a.Label,null,"Password"),c.a.createElement(S.a.Control,{type:"password",placeholder:"Password",className:"mb-4",onChange:D})))),c.a.createElement(y.a,null,c.a.createElement(R.a,{variant:"dark",block:!0,onClick:function(){!function(e,a){s.a.post("/api/auth",JSON.stringify(a),{headers:{"Content-Type":"application/json"}}).then((function(a){e({type:"LOGIN_SUCCESS",payload:a.data})})).catch((function(a){e(v(a.response.data,a.response.status,"LOGIN_FAILED")),e({type:"LOGIN_FAILED"})}))}(e,{email:d,password:I})}},"Login"))))},_=function(){var e=c.a.useState(!1),a=Object(i.a)(e,2),t=a[0],n=a[1];return c.a.createElement(c.a.Fragment,null,c.a.createElement(m.a,{bg:"dark",variant:"dark",expand:"sm",className:"mb-5"},c.a.createElement(E.a,null,c.a.createElement(d.a,{href:"/"},"Shopping List"),c.a.createElement(m.a.Toggle,{"aria-controls":"basic-navbar-nav",onClick:function(){n(!t)}}),c.a.createElement(m.a.Collapse,{id:"basic-navbar-nav"},c.a.createElement(p.a,{className:"ml-auto"},c.a.createElement(b.a,null,c.a.createElement(j,null)),c.a.createElement(b.a,null,c.a.createElement(L,null)),c.a.createElement(b.a,null,c.a.createElement(I,null)))))))},C=function(){var e=Object(u.b)(),a=c.a.useState(!1),t=Object(i.a)(a,2),n=t[0],l=t[1],r=c.a.useState(""),o=Object(i.a)(r,2),m=o[0],d=o[1],p=function(){return l(!1)};return c.a.createElement(E.a,{className:"my-4"},c.a.createElement(R.a,{onClick:function(){l(!0)},variant:"dark"},"Add item"),c.a.createElement(g.a,{show:n,onHide:p,size:"lg"},c.a.createElement(g.a.Header,{closeButton:!0},"Add To Shopping List"),c.a.createElement(h.a,null,c.a.createElement(S.a,null,c.a.createElement(S.a.Group,null,c.a.createElement(S.a.Label,null,"Add Item"),c.a.createElement(S.a.Control,{as:"textarea",rows:"3",placeholder:"Add Shopping Item",onChange:function(e){d(e.target.value)}})))),c.a.createElement(y.a,null,c.a.createElement(R.a,{variant:"dark",block:!0,onClick:function(a){a.preventDefault(),s.a.post("/api/items",{name:m}).then((function(a){e({type:"ADD_SHOPPING_ITEM",payload:a.data})})).catch((function(e){return console.log("POST error: ".concat(e))})),p()}},"Add Item"))))},k=t(116),N=t(114),A=t(110),G=function(){var e=Object(u.c)((function(e){return e.rootReducer.items})),a=Object(u.b)();return c.a.createElement(E.a,null,c.a.createElement(k.a,{style:{marginBottom:"1rem"}},c.a.createElement(N.a,{className:"todo-list"},e&&e.map((function(e){var t=e._id,n=e.name;return c.a.createElement(A.a,{key:t,timeout:500,classNames:"fade"},c.a.createElement(k.a.Item,null,c.a.createElement(R.a,{className:"remove-btn",variant:"danger",size:"sm",onClick:function(){return s.a.delete("/api/items/".concat(t)).then((function(e){console.log("Successfully deleted the item with id: ".concat(t)),a({type:"DELETE_SHOPPING_ITEM",payload:t}),console.log("Executed the dispatch func")})).catch((function(e){return console.log("DELETE error: ".concat(e,", id:").concat(t))}))}},"\xd7"),n))})))))};t(103),t(104);var T=function(){var e=Object(u.b)(),a=Object(u.c)((function(e){return e.authReducer.token}));return c.a.useEffect((function(){!function(e,a){e({type:"USER_LOADING"});var t={headers:{"Content-type":"application/json"}};a&&(t.headers["x-auth-token"]=a),s.a.get("/api/auth/user",t).then((function(a){return e({type:"USER_LOADED",payload:a.data})})).catch((function(a){e(v(a.response.data,a.response.status)),e({type:"AUTH_ERROR"})}))}(e,a),e({type:"ITEMS_LOADING"}),s.a.get("/api/items").then((function(a){return e({type:"GET_SHOPPING_ITEMS",payload:a.data})}))}),[]),c.a.createElement("div",{className:"App"},c.a.createElement(_,null),c.a.createElement(C,null),c.a.createElement(G,null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var w=t(24),D=t(71),P=t(72),H=t(7),U={items:[],loading:!1},F=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:U,a=arguments.length>1?arguments[1]:void 0;switch(a.type){case"GET_SHOPPING_ITEMS":return Object(H.a)(Object(H.a)({},e),{},{items:a.payload,loading:!1});case"ADD_SHOPPING_ITEM":return Object(H.a)(Object(H.a)({},e),{},{items:[].concat(Object(P.a)(e.items),[a.payload])});case"DELETE_SHOPPING_ITEM":return Object(H.a)(Object(H.a)({},e),{},{items:e.items.filter((function(e){return e._id!==a.payload}))});case"ITEMS_LOADING":return Object(H.a)(Object(H.a)({},e),{},{loading:!0});default:return e}},M={token:localStorage.getItem("token"),isAuthenticated:null,isLoading:!1,user:null},x=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:M,a=arguments.length>1?arguments[1]:void 0;switch(a.type){case"USER_LOADING":return Object(H.a)(Object(H.a)({},e),{},{isLoading:!0});case"USER_LOADED":return Object(H.a)(Object(H.a)({},e),{},{isAuthenticated:!0,isLoading:!1,user:a.payload});case"LOGIN_SUCCESS":case"REGISTER_SUCCESS":return localStorage.setItem("token",a.payload.token),Object(H.a)(Object(H.a)(Object(H.a)({},e),a.payload),{},{isAuthenticated:!0,isLoading:!1});case"AUTH_ERROR":case"LOGIN_FAILED":case"LOGOUT_SUCCES":case"REGISTER_FAILED":return localStorage.removeItem("token"),Object(H.a)(Object(H.a)({},e),{},{token:null,isLoading:!1,isAuthenticated:!1,user:null});default:return e}},B={msg:{},status:null,id:null},z=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:B,a=arguments.length>1?arguments[1]:void 0;switch(a.type){case"GET_ERROR":return{msg:a.payload.msg,status:a.payload.status,id:a.payload.id};case"CLEAR_ERROR":return{msg:{},status:null,id:null};default:return e}},J=Object(w.createStore)(Object(w.combineReducers)({rootReducer:F,authReducer:x,errorReducer:z}),Object(D.composeWithDevTools)());r.a.render(c.a.createElement(u.a,{store:J},c.a.createElement(T,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},75:function(e,a,t){e.exports=t(105)}},[[75,1,2]]]);
//# sourceMappingURL=main.28d2859c.chunk.js.map